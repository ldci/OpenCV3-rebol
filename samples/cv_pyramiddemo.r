#! /usr/bin/rebolREBOL [	Title:		"OpenCV Tests: Pyramids demo"	Author:		"François Jouen"	Rights:		"Copyright (c) 2014 François Jouen. All rights reserved."	License:    "BSD-3 - https://github.com/dockimbel/Red/blob/master/BSD-3-License.txt"]set 'appDir what-dir do %../opencv.rwName1: "Pyramids Demo [u d esc] to quit"w: h: 0set 'appDir what-dir picture:  to-string to-local-file join appDir  "_images/lena.jpg"; "images/lena.jpg";print "Select a picture";temp: request-file ;picture: to-string to-local-file to-string temp;src: tmp: dst: cvLoadImage picture CV_LOAD_IMAGE_ANYDEPTH OR CV_LOAD_IMAGE_ANYCOLOR; CV_LOAD_IMAGE_COLOR; CV_LOAD_IMAGE_GRAYSCALE; ipl: getPointerValues src  IplImage! ; get structure content of src image cvNamedWindow wName1 CV_WINDOW_AUTOSIZE;key:  #"q"; 113 as integer!c: 0while [c <> 27] [    c: cvWaitKey 10    if c > 0 [    		; u ; 117   	 	if  c = 117 [     		w: ipl/width * 2 h: ipl/height * 2     		print join to-char c [" Image size: " w " " h]    		dst: cvCreateImage w h IPL_DEPTH_8U 3    		cvPyrUp tmp dst CV_GAUSSIAN_5x5	    	]        	;d ; 100    	if c = 100 [     		w: ipl/width / 2 h: ipl/height / 2     		print join to-char c [" Image size: " w " " h]    		dst: cvCreateImage w h IPL_DEPTH_8U 3    		cvPyrDown tmp dst CV_GAUSSIAN_5x5    		    	]    	ipl/width: w			; update w size    	ipl/height: h			; update h size    ]            cvShowImage wName1 dst    tmp: dst ; update tmp image     ]cvDestroyAllWindowsfree-mem srcfree-mem iplfreeDylib