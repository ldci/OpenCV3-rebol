#! /usr/local/bin/rebolREBOL [	Title:		"OpenCV Tests: Drawing"	Author:		"François Jouen"	Rights:		"Copyright (c) 2015 François Jouen. All rights reserved."	License:    "BSD-3 - https://github.com/dockimbel/Red/blob/master/BSD-3-License.txt"]do %../opencv.r	wndname: "OpenCV text output functions"number: 500delay: 5lineType: CV_AA; // change it to 8 to see non-antialiased graphicsi: 0 width: 1000 height: 700width3: width * 3height3: height * 3;; for random fontsgenerateFonts: does [	thickness: random 3 	_font: random 8 if _font = 8 [_font: 0]	vs: random 5.0	hs: random 3.0	cvInitFont &font _font hs vs _font thickness lineType]image: cvCreateImage width height IPL_DEPTH_32F 3; pt1: make struct! CvPoint! nonept2: make struct! CvPoint! nonefont: make struct! cvFont! none&font: &pointer fontcvInitFont &font CV_FONT_HERSHEY_SIMPLEX 1.0 1.0 0 1 lineType_font: 0vs: 0.0hs: 0.0text_size: make struct! CvSize! reduce [0 0]&text_size: &pointer text_sizeymin: pointer 'integer! 0&ymin: &pointer ymincvGetTextSize "Any key to start" &font &text_size &yminpt1/x: (width - text_size/width) / 2pt1/y: (height + text_size/height) / 2cvPutText image "Any key to start" pt1/x pt1/y &font 0.0 56.0 -56.0 0.0cvNamedWindow wndname CV_WINDOW_AUTOSIZEcvShowImage wndname imageprint ["Focus the window and hit any key to start "]cvwaitKey 0print ["Testing Fonts"]cvZero imagefor i 1 number 1  [    pt1/x: random width3 - width    pt1/y: random height3 - height	color: tocvByteRGB/signed random 255.255.255 	generateFonts	cvPutText image "OpenCV and Rebol" pt1/x pt1/y &font color/1 color/2 color/3 0	cvShowImage wndname image	wait 0]print ["Wait 1 sec"]wait 1cvInitFont &font CV_FONT_HERSHEY_SIMPLEX 3.0 3.0 0 5 lineTypecvGetTextSize "OpenCV forever!" &font &text_size &yminpt1/x: (width - text_size/width) / 2pt1/y: (height + text_size/height) / 2image2: cvCloneImage imageprint ["Testing Images substraction "]for i 1 255 1 [    v: cvScalarAll i    cvAddS image2 v/v0 v/v1 v/v2 v/v3 image none    color: tocvFloatRGB to-tuple reduce [i  i  255]    cvPutText image "OpenCV forever!" pt1/x pt1/y &font color/1 color/2 color/3  0    cvShowImage wndname image    wait 0 ]cvZero imagecvInitFont &font CV_FONT_HERSHEY_SIMPLEX 1.0 1.0 0 1 lineTypecvGetTextSize "Any key to close" &font &text_size &yminpt1/x: (width - text_size/width) / 2pt1/y: (height + text_size/height) / 2cvPutText image "Any key to close" pt1/x pt1/y &font 0 255 0 0cvShowImage wndname imagecvwaitKey 0free-mem imagefree-mem image2cvDestroyWindow wndnamefreeDylib